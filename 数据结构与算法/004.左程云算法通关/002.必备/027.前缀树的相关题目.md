---
date: 2023-12-26 20:09
modified: 2023-12-26 21:58
---

>前置知识：[[026.前缀树原理和代码详解#静态数组的实现方式|静态空间方式实现前缀树]]、[[012.异或运算的骚操作|异或运算]]

# 题目1.接头密匙

## 测试链接

[接头密匙](https://www.nowcoder.com/practice/c552d3b4dfda49ccb883a6371d9a6932)

## 答案

```go
package main

import (
	"strconv"
	"strings"
)

const (
	MAXN = 2000001
	ROAD_COUNT = 12 // 0-9 # -
)

var (
	tree = [MAXN][ROAD_COUNT]int{}
	pass = [MAXN]int{}
	end  = [MAXN]int{}
	cnt  = 1
)

/**
 * @param b int整型二维数组
 * @param a int整型二维数组
 * @return int整型一维数组
 */
func countConsistentKeys(b [][]int, a [][]int) []int {
	ans := make([]int, len(b))
	for _, arr := range a {
		Insert(calcStr(arr))
	}
	for i, arr := range b {
		ans[i] = PrefixNumber(calcStr(arr))
	}
	Clear()
	return ans
}

func calcStr(arr []int) string {
	var builder strings.Builder
	n := len(arr)
	for i := 1; i < n; i++ {
		builder.WriteString(strconv.Itoa(arr[i] - arr[i-1]))
		builder.WriteByte('#')
	}
	return builder.String()
}

func Insert(word string) {
	n := len(word)
	treeIdx := 0
	pass[treeIdx]++
	for i := 0; i < n; i++ {
		idx := getIdx(word[i])
		if tree[treeIdx][idx] == 0 {
			tree[treeIdx][idx] = cnt
			cnt++
		}
		treeIdx = tree[treeIdx][idx]
		pass[treeIdx]++
	}
	end[treeIdx]++
}

func Search(word string) int {
	n := len(word)
	treeIdx := 0
	for i := 0; i < n; i++ {
		treeIdx = tree[treeIdx][getIdx(word[i])]
		if treeIdx == 0 {
			return 0
		}
		
	}
	return end[treeIdx]
}

func PrefixNumber(word string) int {
	n := len(word)
	treeIdx := 0
	for i := 0; i < n; i++ {
		treeIdx = tree[treeIdx][getIdx(word[i])]
		if treeIdx == 0 {
			return 0
		}
		
	}
	return pass[treeIdx]
}

func Delete(word string) {
	if Search(word) == 0 {
		return
	}
	n := len(word)
	treeIdx := 0
	pass[treeIdx]--
	for i := 0; i < n; i++ {
		idx := getIdx(word[i])
		pass[tree[treeIdx][idx]]--
		if pass[tree[treeIdx][idx]] == 0 {
			tree[treeIdx][idx] = 0
			return
		}
		treeIdx = tree[treeIdx][idx]
	}
	end[treeIdx]--
}

func Clear() {
	for i := 0; i < cnt; i++ {
		for j := 0; j < ROAD_COUNT; j++ {
			tree[i][j] = 0
		}
		pass[i] = 0
		end[i] = 0
	}
	cnt = 1
}

func getIdx(char byte) int {
	if char == '-' {
		return 10
	}
	if char == '#' {
		return 11
	}
	return int(char - '0')
}
```

## 复杂度

时间复杂度，O(a 数组的数字个数 * 10) + O(b 数组的数字个数 * 10)
空间复杂度，O(a 数组的数字个数 * 10)，这是树上的节点数量


# 题目 2.数组中两个数的最大异或值

## 题目描述

给你一个整数数组 `nums` ，返回 `nums[i] XOR nums[j]` 的最大运算结果，其中 `0 ≤ i ≤ j < n`

## 测试链接

[421.数组中两个数的最大异或值](https://leetcode.cn/problems/maximum-xor-of-two-numbers-in-an-array/)

## 答案


