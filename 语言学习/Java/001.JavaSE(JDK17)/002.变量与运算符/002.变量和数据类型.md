---
date: 2024-01-04 23:00
modified: 2024-01-05 09:12
---

# 变量

变量的概念：

- 内存中的一个存储区域，该区域的数据可以在同一类型范围内不断变化
- 变量的构成包含三个要素：数据类型、变量名、存储的值
- Java 中变量声明的格式：`数据类型 变量名 = 变量值;`

![[image-20220311000744867.png]]

变量的作用：用于在内存中保存数据

使用变量注意：

- Java 中每个变量必须先声明，后使用
- 使用变量名来访问这块区域的数据
- 变量的作用域：其定义所在的一对 `{}` 内
- 变量只有在其作用域内才有效。出了作用域，变量不可以再被调用
- 同一个作用域内，不能定义重名的变量

## 变量的数据类型

Java 中变量的数据类型分为两大类：

- 基本数据类型：包括整数类型、浮点数类型、字符类型、布尔类型
- 引用数据类型：包括数组、类、接口、枚举、注解、记录

![[Java的数据类型.png]]

## 变量的使用

### 步骤 1：声明变量

格式：`数据类型 变量名;`

举例：

```java
// 声明一个整数类型的年龄
int age; 

// 声明一个小数类型的体重
double weight;

// 声明一个单字符类型的性别 
char gender;

// 声明一个布尔类型的婚姻状态
boolean marry;

// 声明一个字符串类型的姓名
String name;

// 声明多个同类型的变量
int a, b, c; // 表示 a, b, c 三个变量都是 int 类型
```

### 步骤 2：变量的赋值

给变量赋值，就是把“值”存到该变量代表的内存空间中。同时，给变量赋的值类型必须与变量声明的类型一致或兼容。

变量赋值的语法格式：`变量名 = 值;`

举例 1：可以使用合适类型的常量值给已经声明的变量赋值

```java
age = 18;
weight = 109;
gender = '女';
```

举例 2：可以使用其他变量或者表达式给变量赋值

```java
int m = 1;
int n = m;

int x = 1;
int y = 2;
int z = 2 * x + y;
```

举例 3：变量可以反复赋值

```java
// 先声明，后初始化
char gender;
gender = '女';

// 给变量重新赋值，修改 gender 变量的值
gender = '男';
System.out.println("gender = " + gender); // gender = 男
```

举例 4：也可以将变量的声明和赋值一并执行

```java
boolean isBeauty = true;
String name = "迪丽热巴";
```

内存结构如图：

![[image-20220514152216148.png]]

# 基本数据类型

## 整数类型：`byte`、`short`、`int`、`long`

![[image-20220520111756274.png]]

Java 各整数类型有固定的表数范围和字段长度，不受具体操作系统的影响，以保证 Java 程序的可移植性。

![[image-20220311001553945.png]]

- 定义 `long` 类型的变量，赋值时需要以"`l`"或"`L`"作为后缀。
- Java 程序中变量通常声明为 `int` 型，除非不足以表示较大的数，才使用 `long`。
- Java 的整型常量默认为 `int` 型 `。

补充 ：计算机存储单位

- 字节（Byte）：是计算机用于计量存储容量的基本单位，一个字节等于 8 bit。
- 位（bit）：是数据存储的最小单位。二进制数系统中，每个 0 或 1 就是一个位，叫做 bit（比特），其中 8 bit 就称为一个字节(Byte)。
- 转换关系：
	- 8 bit = 1 Byte
    - 1024 Byte = 1 KB
    - 1024 KB = 1 MB
    - 1024 MB = 1 GB
    - 1024 GB = 1 TB
    - 1024 TB = 1 PB

## 浮点类型：`float`、`double`

与整数类型类似，Java 浮点类型也有固定的表数范围和字段长度，不受具体操作系统的影响。

![[image-20220311001749699.png]]

- 浮点型常量有两种表示形式：
    - 十进制数形式。如：`5.12`、`512.0f`、`.512`（必须有小数点）
    - 科学计数法形式。如：`5.12e2`、`512E2`、`100E-2`
- `float`：单精度，尾数可以精确到 7 位有效数字。很多情况下，精度很难满足需求。
- `double`：双精度，精度是 `float` 的两倍。通常采用此类型。
- 定义 `float` 类型的变量，赋值时需要以"`f`"或"`F`"作为后缀。
- Java 的浮点型常量默认为 `double` 型。

关于浮点型精度的说明：

- 并不是所有的小数都能可以精确的用二进制浮点数表示。二进制浮点数不能精确的表示 `0.1`、`0.01`、`0.001` 这样 10 的负次幂。
- 浮点类型 `float`、`double` 的数据不适合在不容许舍入误差的金融计算领域。如果需要精确数字计算或保留指定位数的精度，需要使用 `BigDecimal` 类。
- 测试用例：

```java
// 测试1：（解释见章末企业真题：为什么 0.1 + 0.2 不等于 0.3）
System.out.println(0.1 + 0.2); // 0.30000000000000004

// 测试2：
float ff1 = 123123123f;
float ff2 = ff1 + 1;
System.out.println(ff1); // 1.2312312E8
System.out.println(ff2); // 1.2312312E8
System.out.println(ff1 == ff2); // true
```

## 字符类型：`char`

`char` 型数据用来表示通常意义上“字符”（占 2 字节）

Java 中的所有字符都使用 Unicode 编码，故一个字符可以存储一个字母、一个汉字、或其他书面语的一个字符。

字符型变量的三种表现形式：

- 形式 1：使用单引号(`'`)括起来的单个字符。
	- 例如：`char c1 = 'a';`、`char c2 = '中';`、`char c3 = '9';`
- 形式 2：直接使用 Unicode 值来表示字符型常量：`\uXXXX`。其中，XXXX 代表一个十六进制整数。
	- 例如：`\u0023` 表示 `'#'`。
- 形式 3：Java 中还允许使用转义字符 `\` 来将其后的字符转变为特殊字符型常量。
	- 例如：`char c3 = '\n';`，`'\n'` 表示换行符

| 转义字符 | 说明 | Unicode 表示方式 |
| ---- | ---- | ---- |
| `\n` | 换行符 | `\u000a` |
| `\t` | 制表符 | `\u0009` |
| `\"` | 双引号 | `\u0022` |
| `\'` | 单引号 | `\u0027` |
| `\\` | 反斜线 | `\u005c` |
| `\b` | 退格符 | `\u0008` |
| `\r` | 回车符 | `\u000d` |

`char` 类型是可以进行运算的。因为它都对应有 Unicode 码，可以看做是一个数值。

## 布尔类型：`boolean`

`boolean` 类型用来判断逻辑条件，一般用于流程控制语句中：

- `if` 条件控制语句；
- `while` 循环控制语句；
- `for` 循环控制语句；
- `do-while` 循环控制语句；

`boolean` 类型数据只有两个值：`true`、`false`

不可以使用 0 或非 0 的整数替代 `false` 和 `true`，这点和 C 语言不同。

拓展：Java 虚拟机中没有任何供 `boolean` 值专用的字节码指令，Java 语言表达所操作的 `boolean` 值，在编译之后都使用 java 虚拟机中的 `int` 数据类型来代替：`true` 用 1 表示，`false` 用 0 表示。——《Java 虚拟机规范 8 版》

```java
boolean isFlag = true;

if (isFlag) {
    // true 分支
} else {  
    // false 分支
}
```

>经验之谈：
>
>Less is More！建议不要这样写：`if (isFlag == true)`，只有新手才如此。关键也很容易写错成 `if (isFlag = true)`，这样就变成赋值 `isFlag` 为 `true`，而不是判断！老鸟的写法是 `if (isFlag)` 或者 `if (!isFlag)`。
