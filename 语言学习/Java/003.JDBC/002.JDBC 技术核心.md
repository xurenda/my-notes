---
date: 2024-01-25 21:15
modified: 2024-01-25 21:16
---

# JDBC 核心 API

## 引入 mysql-jdbc 驱动 jar

驱动 jar 版本选择：8.0.27

|MySQL 版本|推荐驱动版本|备注|
|---|---|---|
|MySQL 5.5.x|5.0.x|`com.mysql.jdbc.Driver`|
|MySQL 5.7.x|5.1.x|`com.mysql.jdbc.Driver`|
|MySQL 8.x|8.0.x|建议 8.0.25+ 省略时区设置，`com.mysql.cj.jdbc.Driver`|

Java 工程导入依赖：

1. 项目创建 `lib` 文件夹
2. 导入驱动依赖 jar 包
3. jar 包右键-添加为项目依赖

![[Pasted image 20240125212655.png]]

## JDBC 基本使用步骤分析（6 步）

1. 注册驱动：依赖的 jar 包，进行安装
2. 获取连接：`connection` 建立连接
3. 创建发送 SQL 语句对象：创建发送 SQL 语句的 `statement`
4. 发送 SQL 语句，并获取返回结果：`statement` 发送 SQL 语句到数据库，并且取得返回结构
5. 结果集解析：将 `result` 结果解析出来
6. 资源关闭：释放 `resultset`、`statement`、`connection`

![[Pasted image 20240125212946.png]]

## 基于 `statement` 演示查询

- 准备数据库数据

```SQL
CREATE DATABASE atguigu;

USE atguigu;

CREATE TABLE t_user (
   id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户主键',
   account VARCHAR(20) NOT NULL UNIQUE COMMENT '账号',
   PASSWORD VARCHAR(64) NOT NULL COMMENT '密码',
   nickname VARCHAR(20) NOT NULL COMMENT '昵称');
   
INSERT INTO t_user(account,PASSWORD,nickname) VALUES
  ('root','123456','经理'),('admin','666666','管理员');
```

- 基于 `statement` 实现查询

```SQL
/**
 * @Author 赵伟风
 * Description: 利用 JDBC 技术，完成用户数据查询工作
 *
 * 步骤总结 (6步)
 *    1. 注册驱动
 *    2. 获取连接
 *    3. 创建 statement
 *    4. 发送 SQL 语句，并获取结果
 *    5. 结果集解析
 *    6. 关闭资源
 */

package com.ate.api.statement;

import com.mysql.cj.jdbc.Driver;

import java.sql.*;
import java.util.StringJoiner;

public class statementqury {
    public static void  main(String[] args) throws SQLException {
		// 1. 注册驱动
        // 导入依赖：8+ 版本的驱动要带 cj
        DriverManager.registerDriver(new Driver());

        // 2. 获取连接：connection
		// jdbc:数据库名://ip:port/数据库名
		// java.sql 接口 = 实现类
		Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/atguigu", "root", "0128");

        // 3. 创建 statement
        Statement statement = connection.createStatement();

        // 4. 发送 SQL，获取返回结果
        String sql = "select * from t_user;";
        ResultSet resultset = statement.executeQuery(sql);

        // 5. 进行结果集解析
        while (resultset.next()) {
            int id = resultset.getInt("id"); // get 后面加调用的列的类型
            String account = resultset.getString("account");
            String password = resultset.getString("password");
            String nickname = resultset.getString("nickname");
            System.out.println(id + "--" + account + "--" + password + "--" + nickname);
        }

        // 6. 关闭资源：先打开的后关
        // 打开顺序：connection -> statement -> resultset
        // 关闭顺序：resutset -> statement -> connection
        resultset.close();
        statement.close();
        connection.close();
    }
}
```
